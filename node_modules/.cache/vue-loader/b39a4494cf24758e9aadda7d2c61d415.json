{"remainingRequest":"D:\\frontend\\yuqing\\ycmyuqin\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\frontend\\yuqing\\ycmyuqin\\src\\page\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\frontend\\yuqing\\ycmyuqin\\src\\page\\home.vue","mtime":1622173579018},{"path":"D:\\frontend\\yuqing\\ycmyuqin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\frontend\\yuqing\\ycmyuqin\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoJaW1wb3J0IHRlbmRlbmN5IGZyb20gJy4uL2NvbXBvbmVudHMvdGVuZGVuY3knIAoJaW1wb3J0IGR0aW1lIGZyb20gJ3RpbWUtZm9ybWF0ZXInCglpbXBvcnQge3VzZXJDb3VudCwgb3JkZXJDb3VudCwgZ2V0VXNlckNvdW50LCBnZXRPcmRlckNvdW50LCBhZG1pbkRheUNvdW50LCBhZG1pbkNvdW50fSBmcm9tICdAL2FwaS9nZXREYXRhJwoKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgIAlkYXRhKCl7CiAgICAJCXJldHVybiB7CiAgICAJCQl1c2VyQ291bnQ6IG51bGwsCiAgICAJCQlvcmRlckNvdW50OiBudWxsLAogICAgICAgICAgICAgICAgYWRtaW5Db3VudDogbnVsbCwKICAgICAgICAgICAgICAgIGFsbFVzZXJDb3VudDogbnVsbCwKICAgICAgICAgICAgICAgIGFsbE9yZGVyQ291bnQ6IG51bGwsCiAgICAgICAgICAgICAgICBhbGxBZG1pbkNvdW50OiBudWxsLAogICAgCQkJc2V2ZW5EYXk6IFtdLAogICAgCQkJc2V2ZW5EYXRlOiBbW10sW10sW11dLAogICAgCQl9CiAgICAJfSwKICAgIAljb21wb25lbnRzOiB7CiAgICAJCQogICAgCQl0ZW5kZW5jeSwKCgogICAgCX0sCiAgICAJbW91bnRlZCgpewogICAgCQl0aGlzLmluaXREYXRhKCk7CiAgICAJCWZvciAobGV0IGkgPSA2OyBpID4gLTE7IGktLSkgewogICAgCQkJY29uc3QgZGF0ZSA9IGR0aW1lKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gODY0MDAwMDAqaSkuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgIAkJCXRoaXMuc2V2ZW5EYXkucHVzaChkYXRlKQogICAgCQl9CiAgICAJCXRoaXMuZ2V0U2V2ZW5EYXRhKCk7CiAgICAJfSwKICAgICAgICBjb21wdXRlZDogewoKICAgICAgICB9LAogICAgCW1ldGhvZHM6IHsKICAgIAkJYXN5bmMgaW5pdERhdGEoKXsKICAgIAkJCWNvbnN0IHRvZGF5ID0gZHRpbWUoKS5mb3JtYXQoJ1lZWVktTU0tREQnKQogICAgCQkJUHJvbWlzZS5hbGwoW3VzZXJDb3VudCh0b2RheSksIG9yZGVyQ291bnQodG9kYXkpLCBhZG1pbkRheUNvdW50KHRvZGF5KSwgZ2V0VXNlckNvdW50KCksIGdldE9yZGVyQ291bnQoKSwgYWRtaW5Db3VudCgpXSkKICAgIAkJCS50aGVuKHJlcyA9PiB7CiAgICAJCQkJdGhpcy51c2VyQ291bnQgPSByZXNbMF0uY291bnQ7CiAgICAJCQkJdGhpcy5vcmRlckNvdW50ID0gcmVzWzFdLmNvdW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRtaW5Db3VudCA9IHJlc1syXS5jb3VudDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbFVzZXJDb3VudCA9IHJlc1szXS5jb3VudDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbE9yZGVyQ291bnQgPSByZXNbNF0uY291bnQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxBZG1pbkNvdW50ID0gcmVzWzVdLmNvdW50OwogICAgCQkJfSkuY2F0Y2goZXJyID0+IHsKICAgIAkJCQljb25zb2xlLmxvZyhlcnIpCiAgICAJCQl9KQogICAgCQl9LAogICAgCQlhc3luYyBnZXRTZXZlbkRhdGEoKXsKICAgIAkJCWNvbnN0IGFwaUFyciA9IFtbXSxbXSxbXV07CiAgICAJCQl0aGlzLnNldmVuRGF5LmZvckVhY2goaXRlbSA9PiB7CiAgICAJCQkJYXBpQXJyWzBdLnB1c2godXNlckNvdW50KGl0ZW0pKQogICAgCQkJCWFwaUFyclsxXS5wdXNoKG9yZGVyQ291bnQoaXRlbSkpCiAgICAgICAgICAgICAgICAgICAgYXBpQXJyWzJdLnB1c2goYWRtaW5EYXlDb3VudChpdGVtKSkKICAgIAkJCX0pCiAgICAJCQljb25zdCBwcm9taXNlQXJyID0gWy4uLmFwaUFyclswXSwgLi4uYXBpQXJyWzFdLCAuLi5hcGlBcnJbMl1dCiAgICAJCQlQcm9taXNlLmFsbChwcm9taXNlQXJyKS50aGVuKHJlcyA9PiB7CiAgICAJCQkJY29uc3QgcmVzQXJyID0gW1tdLFtdLFtdXTsKCQkJCQlyZXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKCQkJCQkJaWYgKGl0ZW0uc3RhdHVzID09IDEpIHsKCQkJCQkJCXJlc0FycltNYXRoLmZsb29yKGluZGV4LzcpXS5wdXNoKGl0ZW0uY291bnQpCgkJCQkJCX0KCQkJCQl9KQoJCQkJCXRoaXMuc2V2ZW5EYXRlID0gcmVzQXJyOwogICAgCQkJfSkuY2F0Y2goZXJyID0+IHsKICAgIAkJCQljb25zb2xlLmxvZyhlcnIpCiAgICAJCQl9KQogICAgCQl9CiAgICAJfQogICAgfQo="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/page","sourcesContent":["<template>\r\n\r\n\t<div>\r\n        \r\n\t\t<section class=\"data_section\">\r\n\t\t\t<header class=\"section_title\">实时热点</header>\r\n\t\t\t<el-row :gutter=\"20\" style=\"margin-bottom: 10px;\">\r\n                <el-col :span=\"6\"><div class=\"data_list today_head\"><span class=\"data_num head\">实时热点：</span></div></el-col>\r\n\t\t\t\t<el-col :span=\"6\"><div class=\"data_list\"><span class=\"data_num\">新疆棉</span> </div></el-col>\r\n\t\t\t\t<el-col :span=\"6\"><div class=\"data_list\"><span class=\"data_num\">Covid-19</span> </div></el-col>\r\n                <el-col :span=\"6\"><div class=\"data_list\"><span class=\"data_num\">冬奥会</span> </div></el-col>\r\n\t\t\t</el-row>\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"6\"><div class=\"data_list all_head\"><span class=\"data_num head\">新增热点：</span></div></el-col>\r\n                <el-col :span=\"6\"><div class=\"data_list\"><span class=\"data_num\">G7</span></div></el-col>\r\n                <el-col :span=\"6\"><div class=\"data_list\"><span class=\"data_num\">核污水入海</span></div></el-col>\r\n                <el-col :span=\"6\"><div class=\"data_list\"><span class=\"data_num\">印度疫情</span></div></el-col>\r\n            </el-row>\r\n\t\t</section>\r\n\t\t<tendency :sevenDate='sevenDate' :sevenDay='sevenDay'></tendency>\r\n\t\t\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport tendency from '../components/tendency' \r\n\timport dtime from 'time-formater'\r\n\timport {userCount, orderCount, getUserCount, getOrderCount, adminDayCount, adminCount} from '@/api/getData'\r\n\r\n    export default {\r\n    \tdata(){\r\n    \t\treturn {\r\n    \t\t\tuserCount: null,\r\n    \t\t\torderCount: null,\r\n                adminCount: null,\r\n                allUserCount: null,\r\n                allOrderCount: null,\r\n                allAdminCount: null,\r\n    \t\t\tsevenDay: [],\r\n    \t\t\tsevenDate: [[],[],[]],\r\n    \t\t}\r\n    \t},\r\n    \tcomponents: {\r\n    \t\t\r\n    \t\ttendency,\r\n\r\n\r\n    \t},\r\n    \tmounted(){\r\n    \t\tthis.initData();\r\n    \t\tfor (let i = 6; i > -1; i--) {\r\n    \t\t\tconst date = dtime(new Date().getTime() - 86400000*i).format('YYYY-MM-DD')\r\n    \t\t\tthis.sevenDay.push(date)\r\n    \t\t}\r\n    \t\tthis.getSevenData();\r\n    \t},\r\n        computed: {\r\n\r\n        },\r\n    \tmethods: {\r\n    \t\tasync initData(){\r\n    \t\t\tconst today = dtime().format('YYYY-MM-DD')\r\n    \t\t\tPromise.all([userCount(today), orderCount(today), adminDayCount(today), getUserCount(), getOrderCount(), adminCount()])\r\n    \t\t\t.then(res => {\r\n    \t\t\t\tthis.userCount = res[0].count;\r\n    \t\t\t\tthis.orderCount = res[1].count;\r\n                    this.adminCount = res[2].count;\r\n                    this.allUserCount = res[3].count;\r\n                    this.allOrderCount = res[4].count;\r\n                    this.allAdminCount = res[5].count;\r\n    \t\t\t}).catch(err => {\r\n    \t\t\t\tconsole.log(err)\r\n    \t\t\t})\r\n    \t\t},\r\n    \t\tasync getSevenData(){\r\n    \t\t\tconst apiArr = [[],[],[]];\r\n    \t\t\tthis.sevenDay.forEach(item => {\r\n    \t\t\t\tapiArr[0].push(userCount(item))\r\n    \t\t\t\tapiArr[1].push(orderCount(item))\r\n                    apiArr[2].push(adminDayCount(item))\r\n    \t\t\t})\r\n    \t\t\tconst promiseArr = [...apiArr[0], ...apiArr[1], ...apiArr[2]]\r\n    \t\t\tPromise.all(promiseArr).then(res => {\r\n    \t\t\t\tconst resArr = [[],[],[]];\r\n\t\t\t\t\tres.forEach((item, index) => {\r\n\t\t\t\t\t\tif (item.status == 1) {\r\n\t\t\t\t\t\t\tresArr[Math.floor(index/7)].push(item.count)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.sevenDate = resArr;\r\n    \t\t\t}).catch(err => {\r\n    \t\t\t\tconsole.log(err)\r\n    \t\t\t})\r\n    \t\t}\r\n    \t}\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t@import '../style/mixin';\r\n\t.data_section{\r\n\t\tpadding: 20px;\r\n\t\tmargin-bottom: 40px;\r\n\t\t.section_title{\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 30px;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\t\t.data_list{\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 14px;\r\n\t\t\tcolor: #666;\r\n            border-radius: 6px;\r\n            background: #E5E9F2;\r\n            .data_num{\r\n                color: #333;\r\n                font-size: 26px;\r\n\r\n            }\r\n            .head{\r\n                border-radius: 6px;\r\n                font-size: 22px;\r\n                padding: 4px 0;\r\n                color: #fff;\r\n                display: inline-block;\r\n            }\r\n        }\r\n        .today_head{\r\n            background: #FF9800;\r\n        }\r\n        .all_head{\r\n            background: #20A0FF;\r\n        }\r\n\t}\r\n    .wan{\r\n        .sc(16px, #333)\r\n    }\r\n</style>\r\n"]}]}